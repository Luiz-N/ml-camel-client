// Load ml-gradle for quickly creating a REST API application
buildscript {
  repositories {
    mavenCentral()
    maven {url "http://developer.marklogic.com/maven2/"}
    maven {url "http://rjrudin.github.io/marklogic-java/releases"}
  }
  
  dependencies {
    classpath "com.marklogic:ml-gradle:1.0"
  }
}

apply plugin: 'ml-gradle'
apply plugin: 'java'
apply plugin: 'eclipse'

repositories {
  mavenCentral()
  maven {url "http://developer.marklogic.com/maven2/"}
  maven {url "http://repository.cloudera.com/artifactory/cloudera-repos/" }
  maven {url "http://rjrudin.github.io/marklogic-java/releases"}
}

dependencies {
    
    // Camel component for talking XCC to MarkLogic
    compile "com.marklogic.camel:ml-camel-xcc:0.2"
    
  // MLCP has a bug in its POM file - need to make sure we get the right version of xml-apis
  compile("com.marklogic.camel:ml-camel-mlcp:0.4") {
    exclude module:"xml-apis"
  }
  compile "xml-apis:xml-apis:1.4.01"
  
  compile "org.apache.camel:camel-spring:2.15.1"
  runtime "org.apache.camel:camel-csv:2.15.1"
  runtime "org.apache.camel:camel-velocity:2.15.1"
}

task camelRun(type: JavaExec) {
  main = 'org.apache.camel.spring.Main'
  classpath = sourceSets.main.runtimeClasspath
  systemProperties = [
    "mlHost": mlHost,
    "mlXdbcPort": mlXdbcPort,
    "mlUsername": mlUsername,
    "mlPassword": mlPassword
  ]
}
